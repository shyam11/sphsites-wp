if(_.isUndefined(window.vc))var vc={atts:{}};(function(a){var i=Backbone.View.extend({events:{},$lg_offset_placeholder_value:!1,$lg_size_placeholder_value:!1,initialize:function(){_.bindAll(this,"setLgPlaceholders")},render:function(){return this},save:function(){var t=[];return this.$el.find(".vc_column_offset_field").each(function(){var e=a(this);e.is(":checkbox:checked")?t.push(e.attr("name")):e.is("select")&&""!==e.val()&&t.push(e.val())}),t},setLgPlaceholders:function(){var e=this.$lg_offset_placeholder_value.val().replace(/[^\d]/g,"");this.$lg_size.find("option:first").text(VcI8nColumnOffsetParam.inherit_default),this.$lg_offset.find("option:first").text(e?VcI8nColumnOffsetParam.inherit+e:"")}});vc.atts.column_offset={parse:function(e){return this.content().find("input.wpb_vc_param_value."+e.param_name).data("vcColumnOffset").save().join(" ")},init:function(e,t){a('[data-column-offset="true"]',t).each(function(){var e=a(this);e.find(".wpb_vc_param_value").data("vcColumnOffset",new i({el:e}).render())})}}})(window.jQuery),_.isUndefined(window.vc)&&(vc={atts:{}}),function(c){var n,t=wp.media,r=ajaxurl.replace(/admin\-ajax\.php/,"images/wpspin_light.gif");t.controller.VcCssSingleImage=t.controller.VcSingleImage.extend({setCssEditor:function(e){return e&&(this._css_editor=e),this},updateSelection:function(){var e,t=this.get("selection"),a=this._css_editor.getBackgroundImage();void 0!==a&&""!==a&&-1!==a&&(e=_.map(a.toString().split(/,/),function(e){var t=wp.media.model.Attachment.get(e);return t.fetch(),t})),t.reset(e)}}),n=vc.CssEditor=Backbone.View.extend({attrs:{},layouts:["margin","border-width","padding"],positions:["top","right","bottom","left"],$field:!1,simplify:!1,$simplify:!1,events:{"click .vc_icon-remove":"removeImage","click .vc_add-image":"addBackgroundImage","change .vc_simplify":"changeSimplify"},initialize:function(){_.bindAll(this,"setSimplify")},render:function(e){return this.attrs={},this.$simplify=this.$el.find(".vc_simplify"),_.isString(e)&&this.parse(e),this},parse:function(e){var t=e.split(/\s*(\.[^\{]+)\s*\{\s*([^\}]+)\s*\}\s*/g);t[2]&&this.parseAtts(t[2].replace(/\s+!important/g,""))},addBackgroundImage:function(e){if(e.preventDefault(),window.vc_selectedFilters={},this.image_media)return this.image_media.open("vc_editor");this.image_media=t({state:"vc_single-image",states:[(new t.controller.VcCssSingleImage).setCssEditor(this)]}),this.image_media.on("toolbar:create:vc_single-image",function(e){this.createSelectToolbar(e,{text:window.i18nLocale.set_image})},this.image_media),this.image_media.state("vc_single-image").on("select",this.setBgImage),this.image_media.open("vc_editor")},setBgImage:function(){var n,s,t,e,r;n=this.get("selection"),s=this,t=[],c(".media-modal").addClass("processing-media"),n.each(function(e){t.push(e.get("id"))}),e=t,r=function(e){if(!window.vc||!window.vc.active_panel)return!1;var t,a;t=_.map(e,function(e){return e.attributes}),n.reset(t),a=_.map(n.models,function(e){return e.attributes});var i=vc.template(c("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom));s._css_editor.$el.find(".vc_background-image .vc_image").html(i(a[0])),c(".media-modal").removeClass("processing-media")},c.ajax({dataType:"json",type:"POST",url:window.ajaxurl,data:{action:"vc_media_editor_add_image",filters:window.vc_selectedFilters,ids:e,vc_inline:!0,_vcnonce:window.vcAdminNonce}}).done(function(e){var t,a,i,n;for(t=[],i=[],n=0;n<e.data.ids.length;n++)a=wp.media.model.Attachment.get(e.data.ids[n]),i.push(a.fetch()),t.push(a);c.when.apply(c,i).done(function(){r(t)})}).fail(function(e){c(".media-modal-close").click(),window.vc&&window.vc.active_panel&&window.i18nLocale&&window.i18nLocale.error_while_saving_image_filtered&&vc.active_panel.showMessage(window.i18nLocale.error_while_saving_image_filtered,"error"),window.console&&window.console.error&&window.console.error(e)}).always(function(){c(".media-modal").removeClass("processing-media")})},setCurrentBgImage:function(t){var e,a,i=/([^\?]+)(\?id=\d+){0,1}/,n="",s="";t.match(/^\d+$/)?(a=vc.template(c("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom)),this.$el.find(".vc_background-image .vc_image").html(a({url:r,id:t,css_class:"vc_preview"})),c.ajax({type:"POST",url:window.ajaxurl,data:{action:"wpb_single_image_src",content:t,size:"full",_vcnonce:window.vcAdminNonce},dataType:"html",context:this}).done(function(e){this.$el.find(".vc_ce-image").attr("src",e+"?id="+t).removeClass("vc_preview")})):t.match(i)&&(n=(e=t.split(i))[1],e[2]&&(s=e[2].replace(/[^\d]+/,"")),a=vc.template(c("#vc_css-editor-image-block").html(),_.defaults({},{variable:"img"},vc.templateOptions.custom)),this.$el.find(".vc_background-image .vc_image").html(a({url:n,id:s})))},changeSimplify:function(){var e=_.debounce(this.setSimplify,100);e&&e()},setSimplify:function(){this.simplifiedMode(this.$simplify[0].checked)},simplifiedMode:function(e){e?(this.simplify=!0,this.$el.addClass("vc_simplified")):(this.simplify=!1,this.$el.removeClass("vc_simplified"),_.each(this.layouts,function(e){"border-width"===e&&(e="border");var t=c("[data-attribute="+e+"].vc_top");this.$el.find("[data-attribute="+e+"]:not(.vc_top)").val(t.val())},this))},removeImage:function(e){var t=c(e.currentTarget);e.preventDefault(),t.parent().remove()},getBackgroundImage:function(){return this.$el.find(".vc_ce-image").data("imageId")},parseAtts:function(e){var c,o,l;c=/(\d+\S*)\s+(\w+)\s+([\d\w#\(,]+)/,l=!(o=/^([^\s]+)\s+url\(([^\)]+)\)([\d\w]+\s+[\d\w]+)?$/),_.map(e.split(";"),function(e){var a,t,i,n=e.split(/:\s/),s=n[1]||"",r=n[0]||"";s&&(s=s.trim()),r.match(new RegExp("^("+this.layouts.join("|").replace("-","\\-")+")$"))&&s?(1===(a=s.split(/\s+/g)).length?a=[a[0],a[0],a[0],a[0]]:2===a.length?(a[2]=a[0],a[3]=a[1]):3===a.length&&(a[3]=a[1]),_.each(this.positions,function(e,t){this.$el.find("[data-name="+r+"-"+e+"]").val(a[t])},this)):"background-size"===r?(l=s,this.$el.find("[name=background_style]").val(s)):"background-repeat"!==r||l?"background-image"===r?this.setCurrentBgImage(s.replace(/url\(([^\)]+)\)/,"$1")):"background"===r&&s?((i=s.split(o))[1]&&this.$el.find("[name="+r+"_color]").val(i[1]),i[2]&&this.setCurrentBgImage(i[2])):"border"===r&&s&&s.match(c)?(t=s.split(c),a=[t[1],t[1],t[1],t[1]],_.each(this.positions,function(e,t){this.$el.find("[name="+r+"_"+e+"_width]").val(a[t])},this),this.$el.find("[name=border_style]").val(t[2]),this.$el.find("[name=border_color]").val(t[3]).trigger("change")):-1!=r.indexOf("border")&&s?-1!=r.indexOf("style")?this.$el.find("[name=border_style]").val(s):-1!=r.indexOf("color")?this.$el.find("[name=border_color]").val(s).trigger("change"):-1!=r.indexOf("radius")?this.$el.find("[name=border_radius]").val(s):r.match(/^[\w\-\d]+$/)&&this.$el.find("[name="+r.replace(/\-+/g,"_")+"]").val(s):r.match(/^[\w\-\d]+$/)&&s&&this.$el.find("[name="+r.replace(/\-+/g,"_")+"]").val(s):this.$el.find("[name=background_style]").val(s)},this)},save:function(){var e="";return this.attrs={},_.each(this.layouts,function(e){this.getFields(e)},this),this.getBackground(),this.getBorder(),_.isEmpty(this.attrs)||(e=".vc_custom_"+Date.now()+"{"+_.reduce(this.attrs,function(e,t,a){return t?e+a+": "+t+" !important;":e},"",this)+"}"),e&&vc.frame_window&&vc.frame_window.vc_iframe.setCustomShortcodeCss(e),e},getBackgroundImageSrc:function(){return this.$el.find(".vc_background-image img").attr("src")},getBackgroundColor:function(){return this.$el.find("[name=background_color]").val()},getBackgroundStyle:function(){return this.$el.find("[name=background_style]").val()},getBackground:function(){var e=this.getBackgroundColor(),t=this.getBackgroundImageSrc(),a=this.getBackgroundStyle();e&&t?this.attrs.background=e+" url("+t+")":e?this.attrs["background-color"]=e:t&&(this.attrs["background-image"]="url("+t+")"),a.match(/repeat/)?(this.attrs["background-position"]="0 0",this.attrs["background-repeat"]=a):a.match(/cover|contain/)&&(this.attrs["background-position"]="center",this.attrs["background-repeat"]="no-repeat",this.attrs["background-size"]=a),e.match(/^rgba/)&&(this.attrs["*background-color"]=e.replace(/\s+/,"").replace(/(rgb)a\((\d+)\,(\d+),(\d+),[^\)]+\)/,"$1($2,$3,$4)"))},getBorder:function(){var t=this.$el.find("[name=border_style]").val(),e=this.$el.find("[name=border_radius]").val(),a=this.$el.find("[name=border_color]").val();t&&a&&this.attrs["border-width"]&&this.attrs["border-width"].match(/^\d+\S+$/)?(this.attrs.border=this.attrs["border-width"]+" "+t+" "+a,this.attrs["border-width"]=void 0):_.each(["left","right","top","bottom"],function(e){this.attrs["border-"+e+"-width"]&&(a&&(this.attrs["border-"+e+"-color"]=a),t&&(this.attrs["border-"+e+"-style"]=t))},this),e&&(this.attrs["border-radius"]=e)},getFields:function(a){var i=[];if(this.simplify)return this.getSimplifiedField(a);_.each(this.positions,function(e){var t=this.$el.find("[data-name="+a+"-"+e+"]").val().replace(/\s+/,"");t.match(/^-?\d*(\.\d+){0,1}(%|in|cm|mm|em|rem|ex|pt|pc|px|vw|vh|vmin|vmax)$/)||(t=isNaN(parseFloat(t))?"":parseFloat(t)+"px"),t.length&&i.push({name:e,val:t})},this),_.each(i,function(e){var t="border-width"===a?"border-"+e.name+"-width":a+"-"+e.name;this.attrs[t]=e.val},this)},getSimplifiedField:function(e){var t=this.$el.find("[data-name="+e+"-top]").val().replace(/\s+/,"");t.match(/^-?\d*(\.\d+){0,1}(%|in|cm|mm|em|rem|ex|pt|pc|px|vw|vh|vmin|vmax)$/)||(t=isNaN(parseFloat(t))?"":parseFloat(t)+"px"),t.length&&(this.attrs[e]=t)}}),vc.atts.css_editor={parse:function(e){return this.content().find('input.wpb_vc_param_value[name="'+e.param_name+'"]').data("vcFieldManager").save()},init:function(i,e){c("[data-css-editor=true]",this.content()).each(function(){var e=c(this),t=e.find('input.wpb_vc_param_value[name="'+i.param_name+'"]'),a=t.val();a||(a=function(){var n=vc.edit_element_block_view.model.get("params"),e=_.reduce({bg_color:"background-color",padding:"padding",margin_bottom:"margin-bottom",bg_image:"background-image"},function(e,t,a){var i=n[a];return _.isUndefined(i)||!i.length?e:("bg_image"===a&&(i="url("+i+")"),e+t+": "+i+";")},"",this);return e?".tmp_class{"+e+"}":""}()),t.data("vcFieldManager",new n({el:e}).render(a))}),vc.atts.colorpicker.init.call(this,i,e)}}}(window.jQuery),_.isUndefined(window.vc)&&(vc={atts:{}}),function(a){var i=Backbone.View.extend({events:{change:"setParams"},setParams:function(){var e,t=this.save(),a=this.$el.find('[value="'+t+'"]'),s=vc.edit_element_block_view.content(),i=this.$el;if(a.length){e=a.data("params");var r=[];_.each(e,function(e,t,a){var i,n=s.find("[name="+t+"].wpb_vc_param_value");n.length&&(n.unbind("change.vcParamsPreset"),(i=n.data("vcFieldManager"))&&i.render&&i.render(e),r.push(n),n.val(e).trigger("change"))}),_.each(r,function(e,t){e.bind("change.vcParamsPreset",function(e){_.isUndefined(e.extra_type)&&i.val("")})})}},render:function(){return this.setParams(),this},save:function(){return this.$el.val()}});vc.atts.params_preset={parse:function(e){return a("select[name="+e.param_name+"]",this.content()).val()},init:function(e,t){a(".vc_params-preset-select",t).each(function(){var e=a(this);_.isUndefined(e.data("fieldManager"))&&e.data("fieldManager",new i({el:e}).render())})}}}(window.jQuery),function(o){new function(){o(".gallery_widget_attached_images_list",this.$view).unbind("click.removeImage").on("click.removeImage","a.vc_icon-remove",function(e){e.preventDefault();var t=o(this).closest(".edit_form_line");o(this).parent().remove();var a=[];t.find(".added img").each(function(){a.push(o(this).attr("rel"))}),t.find(".gallery_widget_attached_images_ids").val(a.join(",")).trigger("change")}),o(".gallery_widget_attached_images_list").each(function(e){var t=o(this);t.sortable({forcePlaceholderSize:!0,placeholder:"widgets-placeholder-gallery",cursor:"move",items:"li",update:function(){var e=[];o(this).find(".added img").each(function(){e.push(o(this).attr("rel"))}),t.closest(".edit_form_line").find(".gallery_widget_attached_images_ids").val(e.join(",")).trigger("change")}})})};var a=o("#vc_edit-form-tabs");a.length&&(o(".wpb-edit-form").addClass("vc_with-tabs"),a.find(".vc_edit-form-tab-control").removeClass("vc_active").eq(0).addClass("vc_active"),a.find('[data-vc-ui-element="panel-edit-element-tab"]').removeClass("vc_active").eq(0).addClass("vc_active"),a.find(".vc_edit-form-link").click(function(e){var t=o(this);e.preventDefault(),a.find(".vc_active").removeClass("vc_active"),t.parent().addClass("vc_active"),o(t.attr("href")).addClass("vc_active").parents(".vc_panel-body").scrollTop(0)})),o(".vc_ui-panel .additembutton").click(function(){var e=o(this).parent().parent().next().find(".listitemwindow");e.css({display:"block",top:"220px"}),e.find("[name='item_type']").val("items"),e.find("[name='item_value'], [name='item_content'], [name='item_url'], [name='item_content_color'], [name='item_value_color'], [name='item_value_background_color'], [name='item_border_color']").val(""),e.draggable({handle:o(".vc_panel-heading")}),e.resizable({handles:"n, e, s, w, ne, se, sw, nw"})}),o(".cancel-item-options, .listitemwindow .vc_close").click(function(e){e.preventDefault(),o(".listitemwindow").css("display","none")}),o("#add-item-shortcode").click(function(e){e.preventDefault();var t=window.tinyMCE.get("wpb_tinymce_content"),a=t.getContent(),i=o("[name='additemwindow'] [name='item_content_color']"),n=o("[name='additemwindow'] [name='item_value_color']"),s=o("[name='additemwindow'] [name='item_value_background_color']"),r=o("[name='additemwindow'] [name='item_border_color']"),c="[item"+(o("[name='additemwindow'] [name='item_type']").length?' type="'+o("[name='additemwindow'] [name='item_type']").val()+'"':"")+(o("[name='additemwindow'] [name='item_value']").length?' value="'+o("[name='additemwindow'] [name='item_value']").val()+'"':"")+(o("[name='additemwindow'] [name='item_url']").length?' url="'+o("[name='additemwindow'] [name='item_url']").val()+'"':"")+(o("[name='additemwindow'] [name='item_url_target']").length?' url_target="'+o("[name='additemwindow'] [name='item_url_target']").val()+'"':"")+(o("[name='additemwindow'] [name='item_icon']").length?' icon="'+o("[name='additemwindow'] [name='item_icon']").val()+'"':"")+(""!=i.length?' text_color="'+i.val()+'"':"")+(""!=n.length?' value_color="'+n.val()+'"':"")+(""!=s.length?' value_bg_color="'+s.val()+'"':"")+(""!=r.length?' border_color="'+r.val()+'"':"")+"]"+o("[name='additemwindow'] [name='item_content']").val()+"[/item]";t.setContent(o(a).text()+c),o(".listitemwindow").css("display","none")}),o(".gallery_widget_attached_images_ids").change(function(){var e=o(this).val().split(","),t=0;parseInt(e[0])&&(t=e.length);var a=o(this).hasClass("carousel_images")?5:o(this).hasClass("slider_images")?3:4,i=o(".wpb_el_type_attach_images").nextAll();i.slice(0,30*a+1).css("display","none"),t&&(i.slice(0,t*a).css("display","block"),i.slice(30*a,30*a+1).css("display","block"))}),setTimeout(function(){o(".gallery_widget_attached_images_ids").trigger("change")},1),o(".vc_ui-panel [name^='testimonials_icon'], .vc_ui-panel [name^='testimonials_title'], .vc_ui-panel [name^='testimonials_author'], .vc_ui-panel [name^='testimonials_author_subtext']").parent().parent().css("display","none"),o(".vc_ui-panel [name='testimonials_count']").change(function(){var e=o(this),t=o(".vc_ui-panel [name$='29']").length;o(".vc_ui-panel [name^='testimonials_icon'], .vc_ui-panel [name^='testimonials_title'], .vc_ui-panel [name^='testimonials_author'], .vc_ui-panel [name^='testimonials_author_subtext']").parent().parent().css("display","none"),e.parent().parent().nextUntil("",":lt("+e.val()*t+")").css("display","block")}),setTimeout(function(){o("[name='testimonials_count']").trigger("change")},1),o(".vc_ui-panel [name^='icon_type'], .vc_ui-panel [name^='icon_url'], .vc_ui-panel [name^='icon_target']").parent().parent().css("display","none"),o(".vc_ui-panel [name='icons_count']").change(function(){var e=o(this);o(".vc_ui-panel [name^='icon_type'], .vc_ui-panel [name^='icon_url'], .vc_ui-panel [name^='icon_target']").parent().parent().css("display","none"),e.parent().parent().nextUntil("",":lt("+3*e.val()+")").css("display","block")}),setTimeout(function(){o("[name='icons_count']").trigger("change")},1)}(window.jQuery),_.isUndefined(window.vc)&&(vc={atts:{}}),function(i){"use strict";vc.atts.vc_grid_item={init:function(a,e){!0===vc_user_access().getState("grid_builder")||null===vc_user_access().getState("grid_builder")?this.content().find('[data-vc-shortcode-param-name="'+a.param_name+'"] [data-vc-grid-element="value"]').change(function(){var e=i(this).val(),t=i(this).find("[value="+e+"]").data("vcLink");e&&i(this).parents('[data-vc-shortcode-param-name="'+a.param_name+'"]:first').find('[data-vc-grid-item="edit_link"]').attr("href",t)}).trigger("change"):this.content().find('[data-vc-shortcode-param-name="'+a.param_name+'"] .vc_description').remove()},parse:function(e){var t=this.content().find('[data-vc-shortcode-param-name="'+e.param_name+'"] [data-vc-grid-element="value"]');return t.length?t.val():""}}}(window.jQuery);